---
id: DP.FM.007
name: "Дрейф представлений (View Drift)"
type: failure-mode
status: draft
summary: "View-файлы (README, CLAUDE.md, REGISTRY, посты) рассинхронизируются с model-файлами (Pack-сущности, код, файловая система). Причина: отсутствие автоматической валидации claims в view-файлах при изменении model."
created: 2026-02-20
source: "Аудит WP-54: 9 рассинхронов в 5 репо (2026-02-20)"
trust:
  F: 5
  G: domain
  R: 0.9
epistemic_stage: formed
related:
  extends: [DP.FM.005]
  distinguished_by: [DP.D.015]
  prevented_by: [DP.SYS.016]
  references: [DP.SOTA.001, DP.D.024]
tags: [drift, synchronization, view, model, consistency, failure-mode]
---

# FM: Дрейф представлений (View Drift)

## 1. Паттерн ошибки

Model-файлы (Pack-сущности, код, файловая система) обновляются, а view-файлы (README, CLAUDE.md, REGISTRY, посты, MEMORY.md) — нет. View содержат **claims** (утверждения о модели): числа, пути, ссылки, копии, статусы. При изменении модели claims устаревают, но ничто не сигнализирует об этом.

Результат: пользователь (человек или агент) читает view-файл и принимает решения на основе устаревших данных.

## 2. Отличие от FM.005 (Model-Reality Drift)

| FM.005: Model-Reality Drift | FM.007: View Drift |
|-----------------------------|---------------------|
| Модель расходится с **реальным миром** | View расходится с **model-файлами** |
| Нужно измерение реальности | Нужна валидация файловой системы |
| Динамическая: мир меняется | Статическая: модель обновилась, view нет |
| Решение: Intervention Loop (DP.M.007) | Решение: автогенерация + claim validation |
| Дрейф одного объекта | Дрейф **10+ view-файлов** одновременно |

FM.005 и FM.007 — комплементарные: FM.005 — модель ≠ реальность, FM.007 — view ≠ модель. Цепочка: реальность → модель (FM.005) → view (FM.007) → читатель.

## 3. Как выглядит

| Симптом | Пример из аудита WP-54 |
|---------|------------------------|
| README утверждает устаревшее число | «4 архитектурные характеристики» вместо 6 (ЭМОГСС) |
| README описывает несуществующий раздел | SOTA «пусто», реально 13 сущностей |
| Ссылка на архивированный репо | DS-aist-bot вместо aist_bot_newarchitecture |
| Счётчик расходится с файловой системой | «14 различений» при 32 файлах в 01-domain-contract/ |
| Пост транслирует устаревшую информацию | Пост «4 характеристики» при актуальных 6 |

## 4. 6 типов claims (что может устареть)

| Тип claim | Как проверить | Пример |
|-----------|--------------|--------|
| **Числовой** | `find \| wc` vs stated number | «75 сущностей» — пересчитать файлы |
| **Путь** | `test -f <path>` | Ссылка на DS-aist-bot/ — проверить существование |
| **Ссылка** | Target exists? | `related: [DP.D.099]` — существует ли файл? |
| **Копия** | `sha256sum` match | FMT-exocortex-template CLAUDE.md = оригинал? |
| **Статус** | Cross-check source | README «Phase 0 текущая» vs MAPSTRATEGIC |
| **Существование** | `ls \| wc` | «SOTA пусто» при 13 файлах в 06-sota/ |

## 5. 10 view-файлов, подверженных дрейфу

1. README.md (Pack) — счётчики, структура, описания
2. CLAUDE.md (main ~/Github/) — ссылки, синонимы
3. MEMORY.md — навигационные ссылки, статусы РП
4. REPOSITORY-REGISTRY.md — список репо, статусы, граф
5. CLAUDE.md (per-repo) — правила, ссылки
6. 00-pack-manifest.md — entity counts, версия
7. ontology.md — понятия, кросс-ссылки
8. Посты (docs/) — транслированные числа, термины
9. WeekPlan — статусы РП (vs реальность)
10. FMT-exocortex-template — копии файлов из оригинала

## 6. Антипаттерн → Паттерн

| Антипаттерн | Паттерн |
|-------------|---------|
| README пишется вручную, обновляется «когда вспомнят» | README auto-generated из файловой системы (pack-readme-gen.sh) |
| Счётчики в view указаны как литералы | Счётчики вычисляются при генерации (`find \| wc`) |
| Ссылки не проверяются | Claim validation (consistency-check.sh): каждая ссылка → `test -f` |
| Копии дрейфуют незаметно | Hash-check при каждом sync (sha256sum) |
| Рассинхрон обнаруживается случайно | Ежедневный отчёт + TG-уведомление при расхождениях |

## 7. Профилактика

1. **pack-readme-gen.sh** — автогенерация README из файловой системы (→ Синхронизатор Phase 2.5)
2. **consistency-check.sh** — валидация 6 типов claims по 10 view-файлам (→ Синхронизатор Phase 2.5)
3. **consistency-audit** промпт — семантическая проверка LLM: устаревшие описания, противоречия (→ Синхронизатор Phase 3)
4. **Capture-to-Pack** протокол — при изменении Pack обновлять view в той же сессии
5. **Selective Reindex** — при изменении Pack пересчитать knowledge-mcp индекс

## 8. Тест обнаружения

1. Совпадает ли число сущностей в README с `find pack/ -name "*.md" | wc -l`? Нет → drift
2. Все ли пути в CLAUDE.md навигации существуют? `test -f` для каждого
3. Совпадает ли версия в README и 00-pack-manifest.md?
4. Есть ли в REGISTRY архивированные репо без пометки `~~Archived~~`?
