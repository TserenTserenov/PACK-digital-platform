---
id: DP.D.027
name: "Content Budget Model (3 оси)"
type: distinction
status: active
summary: "Длина, глубина и персонализация контента — три независимые оси, управляемые раздельно"
created: 2026-02-18
edition: "2026-02"
trust:
  F: 3
  G: internal
  R: 0.9
related:
  integrates_with: [DP.SOTA.002, DP.AISYS.014]
tags: [content-generation, bloom, personalization, budget]
---

# Content Budget Model (3 оси)

## Проблема

Единая формула `words = duration × WPM × bloom_multiplier` смешивает длину и глубину. Bloom-множитель увеличивает объём текста, но не его сложность — пользователь на Bloom 3 получает просто более длинный текст, а не более глубокий.

## Решение: три независимые оси

| Ось | Что управляет | Механизм | Параметры |
|-----|--------------|----------|-----------|
| **1. Длина** | Объём текста в словах | `words = duration × WPM_BASE × BLOOM_MULTIPLIER[bloom]` | WPM_BASE=60, множители: {1: 1.0, 2: 1.3, 3: 1.7} |
| **2. Глубина** | Стиль и сложность изложения | Инструкция в system prompt Claude | BLOOM_INSTRUCTION[bloom] |
| **3. Персонализация** | Адаптация под профиль | Контекст пользователя (DT, tier, профиль) | Context Pipeline |

### Ось 1: Длина (Content Budget)

```
words = duration_minutes × WPM_BASE × BLOOM_MULTIPLIER[bloom_level]
```

| Параметр | Значение | Обоснование |
|----------|----------|-------------|
| WPM_BASE | 60 | Скорость чтения образовательного контента (не художественного) |
| BLOOM_MULTIPLIER[1] | 1.0 | Базовый уровень |
| BLOOM_MULTIPLIER[2] | 1.3 | +30% на терминологию и связи |
| BLOOM_MULTIPLIER[3] | 1.7 | +70% на анализ и источники |

**Примеры:**

| Время | Bloom 1 | Bloom 2 | Bloom 3 |
|-------|---------|---------|---------|
| 5 мин | 300 слов | 390 слов | 510 слов |
| 15 мин | 900 слов | 1170 слов | 1530 слов |
| 25 мин | 1500 слов | 1950 слов | 2550 слов |

### Ось 2: Глубина (BLOOM_INSTRUCTION)

| Bloom | Инструкция в prompt |
|-------|---------------------|
| 1 | Объясни доступно, без терминов. Примеры из повседневной жизни. |
| 2 | Используй профессиональную терминологию. Показывай связи между понятиями. |
| 3 | Экспертный уровень. Критический анализ, неочевидные аспекты, ссылки на источники. |

### Ось 3: Персонализация

Tier Context Pipeline (DP.SOTA.002) подаёт в prompt:
- Профиль пользователя (occupation, interests, goals)
- Состояние по тесту систематичности (chaos/deadlock/turning_point)
- Цифровой двойник (T3+)

## Где применяется

| Контент | Использует оси |
|---------|---------------|
| Урок (Марафон) | 1 + 2 + 3 |
| Дайджест (Лента) | 1 + 2 + 3 |
| Вопрос | 2 (глубина вопроса зависит от bloom) |
| Практика (задание) | 2 + 3 |

## Тест

Если при увеличении bloom пользователь получает только более длинный, но не более глубокий текст — Ось 2 не работает. Если при одинаковом bloom+time разные пользователи получают идентичный текст — Ось 3 не работает.

## Реализация в коде

```python
# config/settings.py
WPM_BASE = 60
BLOOM_MULTIPLIER = {1: 1.0, 2: 1.3, 3: 1.7}
BLOOM_INSTRUCTION = {
    1: "Объясни доступно, без терминов. Примеры из повседневной жизни.",
    2: "Используй профессиональную терминологию. Показывай связи между понятиями.",
    3: "Экспертный уровень. Критический анализ, неочевидные аспекты, ссылки на источники.",
}

def calc_words(duration_minutes: int, bloom_level: int = 1) -> int:
    bl = max(1, min(bloom_level, 3))
    return int(duration_minutes * WPM_BASE * BLOOM_MULTIPLIER.get(bl, 1.0))
```

> Используется в: `clients/claude.py`, `engines/feed/planner.py`, `core/helpers.py`, `core/topics.py`
